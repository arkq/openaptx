/*
 * [open]aptx - params.c
 * Copyright (c) 2017 Arkadiusz Bokowy
 *
 * This file is a part of [open]aptx.
 *
 * This project is licensed under the terms of the MIT license.
 *
 */

#include "params.h"

const int32_t aptX_IQuant_log_table[32] = {
	4194304, 4286464, 4380672, 4476928, 4573184, 4673536, 4775936, 4880384, 4986880, 5097472, 5208064,
	5322752, 5439488, 5558272, 5681152, 5804032, 5931008, 6062080, 6195200, 6330368, 6467584, 6610944,
	6754304, 6903808, 7053312, 7208960, 7366656, 7528448, 7692288, 7860224, 8032256, 8208384,
};

const int32_t aptX_QMF_outer_coeffs[16] = {
	730, -413, -9611, 43626, -121026, 269973, -585547, 2801966, 697128, -160481, 27611, 8478, -10043, 3511, 688, -897,
};

const int32_t aptX_QMF_inner_coeffs[16] = {
	1033,   -584,    -13592, 61697, -171156, 381799, -828088, 3962579,
	985888, -226954, 39048,  11990, -14203,  4966,   973,     -1268,
};

const int32_t aptX_dq7bit16_sl1[65] = {
	-9948,   9948,    29860,   49808,   69822,   89926,   110144,  130502,  151026,  171738,  192666,  213832,  235264,
	256982,  279014,  301384,  324118,  347244,  370790,  394782,  419250,  444226,  469742,  495832,  522536,  549890,
	577936,  606720,  636290,  666700,  698006,  730270,  763562,  797958,  833538,  870398,  908640,  948376,  989740,
	1032874, 1077948, 1125150, 1174700, 1226850, 1281900, 1340196, 1402156, 1468282, 1539182, 1615610, 1698514, 1789098,
	1888944, 2000168, 2125700, 2269750, 2438670, 2642660, 2899462, 3243240, 3746078, 4535138, 5664098, 7102424, 8897462,
};
const int32_t aptX_dq7dith16_sf1[65] = {
	9948,  9948,  9962,  9988,  10026, 10078,  10142,  10218,  10306,  10408,  10520,  10646,  10784,
	10934, 11098, 11274, 11462, 11664, 11880,  12112,  12358,  12618,  12898,  13194,  13510,  13844,
	14202, 14582, 14988, 15422, 15884, 16380,  16912,  17484,  18098,  18762,  19480,  20258,  21106,
	22030, 23044, 24158, 25390, 26760, 28290,  30008,  31954,  34172,  36728,  39700,  43202,  47382,
	52462, 58762, 66770, 77280, 91642, 112348, 144452, 199326, 303512, 485546, 643414, 794914, 1000124,
};
const int32_t aptX_dq7mLamb16[65] = {
	0,     -4,    -7,    -10,   -13,   -16,   -19,    -22,    -26,    -28,    -32,    -35,    -38,
	-41,   -44,   -47,   -51,   -54,   -58,   -62,    -65,    -70,    -74,    -79,    -84,    -90,
	-95,   -102,  -109,  -116,  -124,  -133,  -143,   -154,   -166,   -180,   -195,   -212,   -231,
	-254,  -279,  -308,  -343,  -383,  -430,  -487,   -555,   -639,   -743,   -876,   -1045,  -1270,
	-1575, -2002, -2628, -3591, -5177, -8026, -13719, -26047, -45509, -39467, -37875, -51303, 0,
};
const int32_t aptX_q7incr16[65] = {
	0,   -21, -19, -17, -15, -12, -10, -8,  -6,  -4,  -1,  1,   3,   6,   8,   10,  13,  15,  18,  20,  23,  26,
	29,  31,  34,  37,  40,  43,  47,  50,  53,  57,  60,  64,  68,  72,  76,  80,  85,  89,  94,  99,  105, 110,
	116, 123, 129, 136, 144, 152, 161, 171, 182, 194, 207, 223, 241, 263, 291, 328, 382, 467, 522, 522, 522,
};

const int32_t aptX_dq4bit16_sl1[9] = { -89806, 89806, 278502, 494338, 759442, 1113112, 1652322, 2720256, 5190186 };
const int32_t aptX_dq4dith16_sf1[9] = { 89806, 89806, 98890, 116946, 148158, 205512, 333698, 734236, 1735696 };
const int32_t aptX_dq4mLamb16[9] = { 0, -2271, -4514, -7803, -14339, -32047, -100135, -250365, 0 };
const int32_t aptX_q4incr16[9] = { 0, -14, 6, 29, 58, 96, 154, 270, 521 };

const int32_t aptX_dq3bit16_sl1[5] = { -163006, 163006, 542708, 1120554, 2669238 };
const int32_t aptX_dq3dith16_sf1[5] = { 163006, 163006, 216698, 361148, 1187538 };
const int32_t aptX_dq3mLamb16[5] = { 0, -13423, -36113, -206598, 0 };
const int32_t aptX_q3incr16[5] = { 0, -8, 33, 95, 262 };

const int32_t aptX_dq2bit16_sl1[3] = { -194080, 194080, 890562 };
const int32_t aptX_dq2dith16_sf1[3] = { 194080, 194080, 502402 };
const int32_t aptX_dq2mLamb16[3] = { 0, -77081, 0 };
const int32_t aptX_q2incr16[3] = { 0, -33, 136 };

const aptX_subband_params_422 aptX_params_422[] = {
	[APTX_SUBBAND_LL] = { NULL, aptX_dq7bit16_sl1, NULL, aptX_dq7dith16_sf1, aptX_dq7mLamb16, aptX_q7incr16, 7, 0x11FF,
	                      -20, 24 },
	[APTX_SUBBAND_LH] = { NULL, aptX_dq4bit16_sl1, NULL, aptX_dq4dith16_sf1, aptX_dq4mLamb16, aptX_q4incr16, 4, 0x14FF,
	                      -23, 12 },
	[APTX_SUBBAND_HL] = { NULL, aptX_dq2bit16_sl1, NULL, aptX_dq2dith16_sf1, aptX_dq2mLamb16, aptX_q2incr16, 2, 0x16FF,
	                      -25, 6 },
	[APTX_SUBBAND_HH] = { NULL, aptX_dq3bit16_sl1, NULL, aptX_dq3dith16_sf1, aptX_dq3mLamb16, aptX_q3incr16, 3, 0x15FF,
	                      -24, 12 },
};
